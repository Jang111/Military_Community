{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./Content.css';import Paging from'../utils/Paging';import axios from'axios';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Contents=()=>{const navigate=useNavigate();// 다른 페이지로 데이터를 전달하기 위한 함수\n//목록 선택하기 위한 title변수 설정\nconst[title,setTitle]=useState('');//board list Data\nconst[data_list,setDataList]=useState([]);//PagingNation\nconst[paging,setPaging]=useState(Paging);//요청 시 값 검증\nconst lookBoardListCheck=()=>{if(paging.page<1){alert(\"값이 부정확합니다.\");return false;}return true;};const lookBoardList=async()=>{// console.log(\"lookBoardList\");\ntry{paging.loading=true;if(!lookBoardListCheck()){return;}const header={'Content-type':'application/json; charset=utf-8;',Accept:'application/json'};const data={page:paging.page// 현재 페이지\n};// console.log(paging.loading)\naxios.post(\"http://127.0.0.1:8000/lookList/\",data,{header}).then(response=>{const res=response.data;//응답값에서 data값 parsing\nif(res.responseCode){const resData=res.responseData;//total_count 요소을 Paging객체에 추가\nsetPaging({...paging,total_count:resData.total_count});setDataList(resData.dt_list);// console.log(resData.dt_list);\n}else{alert(res.message);}}).catch(response=>{alert(response);});}catch(e){alert(\"서버 에러\");}finally{paging.loading=false;}};function handleClick(event){//커뮤니티(버튼) 클릭시, 커뮤니티(컴포넌트)로 이동\nwindow.location.href=\"/Write\";}const seeDetail=(id,tit,cont,dt,auth,pwd)=>{// 게시판 요소 클릭 시 컨텐츠 조회 기능\nnavigate(\"/Detail\",{state:{id:id,title:tit,content:cont,pub_date:dt,author:auth,password:pwd}// /Detail 페이지로 전송할 데이터\n});};//page 선택\nconst onSetPage=value=>{//Paging 객체에 page 추가\nsetPaging({...paging,page:value});};//게시글 선택 함수\nconst selectContent=Title=>{console.log(\"choiced title : \",Title);setTitle(Title);};useEffect(()=>{// 데이터 가져오기를 위해 사용한 hook\nconsole.log(\"useEffect\");lookBoardList();//page가 변경되면 데이터 목록 요청\n},[paging.page]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"\\uC120\\uBC30\\uC640\\uC758 \\uB300\\uD654\"})}),/*#__PURE__*/_jsxs(\"table\",{className:\"tb1\",children:[/*#__PURE__*/_jsx(\"button\",{class:\"btn2\",onClick:handleClick,children:\"\\uAE00\\uC4F0\\uAE30\"}),/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{class:\"number\",children:\"\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"th\",{class:\"tit\",children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"th\",{class:\"date\",children:\"\\uC791\\uC131\\uC77C\\uC790\"}),/*#__PURE__*/_jsx(\"th\",{class:\"writer\",children:\"\\uC791\\uC131\\uC790\"})]})}),paging.loading&&/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{style:{height:400},rowSpan:10,colSpan:4,children:\"Loading...\"})})}),paging.loading===false&&data_list.length<1?/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{style:{height:400},colSpan:4,children:\"No Data\"})})}):/*#__PURE__*/_jsx(\"tbody\",{children:data_list.map((index,i)=>/*#__PURE__*/ // index : 테이블의 각 행의 요소(번호, 제목, 작성날짜, 작성자)를 의미 , i : '번호'만을 의미\n_jsxs(\"tr\",{onClick:()=>selectContent(index.title),children:[/*#__PURE__*/_jsx(\"td\",{children:paging.total_count-(paging.page-1)*10-i}),/*#__PURE__*/_jsx(\"td\",{style:{cursor:'pointer'},onClick:()=>seeDetail(index.id,index.title,index.content,index.pub_date,index.author,index.password),children:index.title}),/*#__PURE__*/_jsx(\"td\",{children:index.pub_date}),/*#__PURE__*/_jsx(\"td\",{children:index.author})]},index.title))})]}),/*#__PURE__*/_jsx(\"ul\",{style:{textAlign:\"center\",paddingTop:12},children:Array.from({length:paging.total_count/10+1},(_,idx)=>/*#__PURE__*/_jsx(\"li\",{style:{padding:8,margin:4,borderRadius:4,cursor:'pointer',border:'2px solid green',width:10,height:10,display:'inline-block'},onClick:()=>onSetPage(idx+1),children:idx+1},idx+1))})]});};export default Contents;","map":{"version":3,"names":["React","useState","useEffect","Paging","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Contents","navigate","title","setTitle","data_list","setDataList","paging","setPaging","lookBoardListCheck","page","alert","lookBoardList","loading","header","Accept","data","post","then","response","res","responseCode","resData","responseData","total_count","dt_list","message","catch","e","handleClick","event","window","location","href","seeDetail","id","tit","cont","dt","auth","pwd","state","content","pub_date","author","password","onSetPage","value","selectContent","Title","console","log","children","className","class","onClick","style","height","rowSpan","colSpan","length","map","index","i","cursor","textAlign","paddingTop","Array","from","_","idx","padding","margin","borderRadius","border","width","display"],"sources":["C:/Users/jangty/Desktop/miliHelper/Military_Community/vs_workspace/community/src/pages/Contents.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport './Content.css';\r\nimport Paging from '../utils/Paging';\r\nimport axios from 'axios';\r\nimport {useNavigate} from \"react-router-dom\";\r\n\r\nconst Contents = () => {\r\n    \r\n    const navigate = useNavigate(); // 다른 페이지로 데이터를 전달하기 위한 함수\r\n\r\n    \r\n    //목록 선택하기 위한 title변수 설정\r\n    const [title, setTitle] = useState('');\r\n\r\n    //board list Data\r\n    const [data_list, setDataList] = useState([]);\r\n\r\n    //PagingNation\r\n    const [paging, setPaging] = useState(Paging);\r\n\r\n    //요청 시 값 검증\r\n    const lookBoardListCheck = () =>{\r\n        if(paging.page < 1){\r\n            alert(\"값이 부정확합니다.\");\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const lookBoardList = async() => {\r\n        // console.log(\"lookBoardList\");\r\n        try{\r\n            paging.loading = true;\r\n            if(!lookBoardListCheck()){\r\n                return;\r\n            }\r\n            const header = {\r\n                'Content-type' : 'application/json; charset=utf-8;',\r\n                Accept : 'application/json',\r\n            };\r\n            const data = {\r\n                page : paging.page // 현재 페이지\r\n            };\r\n            // console.log(paging.loading)\r\n            axios.post(\"http://127.0.0.1:8000/lookList/\", data,{\r\n                header,\r\n            }).then(\r\n                (response) => {\r\n                    const res = response.data;//응답값에서 data값 parsing\r\n                    if(res.responseCode){\r\n                        const resData = res.responseData;\r\n                        //total_count 요소을 Paging객체에 추가\r\n                        setPaging({...paging, total_count : resData.total_count});\r\n                        setDataList(resData.dt_list);\r\n                        \r\n                        // console.log(resData.dt_list);\r\n                    }else{\r\n                        alert(res.message);\r\n                    }\r\n                }).catch((response)=>{\r\n                    alert(response);\r\n                });\r\n        }catch(e){\r\n            alert(\"서버 에러\")\r\n        }finally{\r\n            paging.loading = false;\r\n        }\r\n    };\r\n\r\n    function handleClick(event){ //커뮤니티(버튼) 클릭시, 커뮤니티(컴포넌트)로 이동\r\n        window.location.href = \"/Write\"\r\n    }\r\n\r\n    const seeDetail = (id, tit, cont, dt, auth, pwd)=>{ // 게시판 요소 클릭 시 컨텐츠 조회 기능\r\n        navigate(\"/Detail\", {\r\n            state:{\r\n                id : id,\r\n                title : tit,\r\n                content: cont,\r\n                pub_date: dt,\r\n                author : auth,\r\n                password : pwd,\r\n            } // /Detail 페이지로 전송할 데이터\r\n        })\r\n    }\r\n    \r\n    //page 선택\r\n    const onSetPage = (value) => {\r\n        //Paging 객체에 page 추가\r\n        setPaging({...paging, page:value});\r\n    };\r\n\r\n    //게시글 선택 함수\r\n    const selectContent = (Title)=>{\r\n        console.log(\"choiced title : \",Title)\r\n        setTitle(Title);\r\n    }\r\n\r\n    useEffect(()=>{ // 데이터 가져오기를 위해 사용한 hook\r\n        console.log(\"useEffect\");\r\n        lookBoardList();//page가 변경되면 데이터 목록 요청\r\n    }, [paging.page])\r\n    return (\r\n        <div>\r\n            <div>\r\n                <h2>선배와의 대화</h2>\r\n            </div>\r\n            \r\n            <table className = \"tb1\">\r\n                <button class=\"btn2\" onClick={handleClick}>\r\n                    글쓰기\r\n                </button>\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"number\">번호</th>\r\n                        <th class=\"tit\">제목</th>\r\n                        <th class=\"date\">작성일자</th>\r\n                        <th class=\"writer\">작성자</th>\r\n                    </tr>\r\n                </thead>\r\n                {paging.loading && (\r\n                <tbody>\r\n                  <tr>\r\n                    <td style = {{height: 400}}\r\n                        rowSpan = {10}\r\n                        colSpan = {4}\r\n                    >\r\n                        Loading...\r\n                    </td>  \r\n                  </tr>  \r\n                </tbody>\r\n                )}\r\n                {(paging.loading === false) && (data_list.length<1) ? (\r\n                <tbody>\r\n                    <tr>\r\n                        <td style = {{height:400}}\r\n                        colSpan = {4}>\r\n                            No Data\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n                ):(\r\n                    <tbody>\r\n                        {data_list.map((index, i)=>( // index : 테이블의 각 행의 요소(번호, 제목, 작성날짜, 작성자)를 의미 , i : '번호'만을 의미\r\n                            <tr\r\n                                key={index.title}\r\n                                onClick={()=>selectContent(index.title)}\r\n                            >\r\n                                <td>\r\n                                    {paging.total_count-(paging.page-1) * 10 - i}\r\n                                </td>\r\n                                <td style={{cursor:'pointer',}} onClick={()=>seeDetail(index.id,index.title, index.content, index.pub_date, index.author, index.password)}>{index.title}</td>\r\n                                <td>{index.pub_date}</td>\r\n                                <td>{index.author}</td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                )}\r\n            </table>\r\n            <ul style={{textAlign:\"center\", paddingTop:12}}>\r\n                {Array.from(\r\n                    {length:(paging.total_count / 10) + 1},\r\n                    (_, idx) => (\r\n                        <li \r\n                            key={idx+1}\r\n                            style={{\r\n                                padding:8,\r\n                                margin:4,\r\n                                borderRadius:4,\r\n                                cursor:'pointer',\r\n                                border:'2px solid green',\r\n                                width:10,\r\n                                height:10,\r\n                                display: 'inline-block',\r\n                            }}\r\n                            onClick={()=>onSetPage(idx+1)}\r\n                        >\r\n                            {idx+1}\r\n                        </li>\r\n                    ),\r\n                )}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Contents"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}